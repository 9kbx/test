import{K as q,r as $,a1 as z,k as A,a0 as M,ak as l,au as g,o as r,a as N,Y as e,S as o,ac as v,T as m,R as c,W as u}from"./vue.e20a9695.js";import{e as b,f as k,z as U,E as Q}from"./index.795da706.js";import{_ as F}from"./editPos.vue_vue_type_script_setup_true_name_sysEditPos_lang.0339f015.js";import{S as x}from"./sys-pos-api.57d4df69.js";import"./monacoEditor.9170b963.js";const G={class:"sys-pos-container"},I=q({name:"sysPos"}),O=q({...I,setup(L){const y=$(),t=z({loading:!1,posData:[],queryParams:{name:void 0,code:void 0},editPosTitle:""});A(async()=>{i(),b.on("submitRefresh",()=>{i()})}),M(()=>{b.off("submitRefresh")});const i=async()=>{t.loading=!0;var a=await k(x).apiSysPosListGet(t.queryParams.name,t.queryParams.code);t.posData=a.data.result??[],t.loading=!1},C=()=>{t.queryParams.name=void 0,t.queryParams.code=void 0,i()},D=()=>{var a;t.editPosTitle="添加职位",(a=y.value)==null||a.openDialog({status:1})},T=a=>{var d;t.editPosTitle="编辑职位",(d=y.value)==null||d.openDialog(a)},V=a=>{U.confirm(`确定删除职位：【${a.name}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await k(x).apiSysPosDeletePost({id:a.id}),i(),Q.success("删除成功")}).catch(()=>{})};return(a,d)=>{const P=l("el-input"),_=l("el-form-item"),p=l("el-button"),B=l("el-button-group"),E=l("el-form"),h=l("el-card"),s=l("el-table-column"),w=l("el-tag"),K=l("el-table"),f=g("auth"),R=g("loading");return r(),N("div",G,[e(h,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:o(()=>[e(E,{model:t.queryParams,ref:"queryForm",inline:!0},{default:o(()=>[e(_,{label:"职位名称",prop:"name"},{default:o(()=>[e(P,{placeholder:"职位名称",clearable:"",onKeyup:v(i,["enter"]),modelValue:t.queryParams.name,"onUpdate:modelValue":d[0]||(d[0]=n=>t.queryParams.name=n)},null,8,["onKeyup","modelValue"])]),_:1}),e(_,{label:"职位编码",prop:"code"},{default:o(()=>[e(P,{placeholder:"职位编码",clearable:"",onKeyup:v(i,["enter"]),modelValue:t.queryParams.code,"onUpdate:modelValue":d[1]||(d[1]=n=>t.queryParams.code=n)},null,8,["onKeyup","modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(B,null,{default:o(()=>[m((r(),c(p,{type:"primary",icon:"ele-Search",onClick:i},{default:o(()=>[u(" 查询 ")]),_:1})),[[f,"sysPos:list"]]),e(p,{icon:"ele-Refresh",onClick:C},{default:o(()=>[u(" 重置 ")]),_:1})]),_:1})]),_:1}),e(_,null,{default:o(()=>[m((r(),c(p,{type:"primary",icon:"ele-Plus",onClick:D},{default:o(()=>[u(" 新增 ")]),_:1})),[[f,"sysPos:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),e(h,{shadow:"hover",style:{"margin-top":"8px"}},{default:o(()=>[m((r(),c(K,{data:t.posData,style:{width:"100%"},border:""},{default:o(()=>[e(s,{type:"index",label:"序号",width:"55",align:"center"}),e(s,{prop:"name",label:"职位名称","show-overflow-tooltip":""}),e(s,{prop:"code",label:"职位编码","show-overflow-tooltip":""}),e(s,{prop:"orderNo",label:"排序",width:"70",align:"center","show-overflow-tooltip":""}),e(s,{label:"状态",width:"70",align:"center","show-overflow-tooltip":""},{default:o(n=>[n.row.status===1?(r(),c(w,{key:0,type:"success"},{default:o(()=>[u("启用")]),_:1})):(r(),c(w,{key:1,type:"danger"},{default:o(()=>[u("禁用")]),_:1}))]),_:1}),e(s,{prop:"createTime",label:"修改时间",align:"center","show-overflow-tooltip":""}),e(s,{prop:"remark",label:"备注","show-overflow-tooltip":""}),e(s,{label:"操作",width:"140",fixed:"right",align:"center","show-overflow-tooltip":""},{default:o(n=>[m((r(),c(p,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:S=>T(n.row)},{default:o(()=>[u(" 编辑 ")]),_:2},1032,["onClick"])),[[f,"sysPos:update"]]),m((r(),c(p,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:S=>V(n.row)},{default:o(()=>[u(" 删除 ")]),_:2},1032,["onClick"])),[[f,"sysPos:delete"]])]),_:1})]),_:1},8,["data"])),[[R,t.loading]])]),_:1}),e(F,{ref_key:"editPosRef",ref:y,title:t.editPosTitle},null,8,["title"])])}}});export{O as default};
