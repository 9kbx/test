import{K as j,r,l as g,w as C,k as A,ak as f,o as F,R as L,S as o,Y as u,W as v,a as z,ab as D,F as E}from"./vue.e20a9695.js";import{_ as I}from"./_plugin-vue_export-helper.c27b6911.js";const K=j({__name:"year",props:{cron:{type:Object,default:{second:"*",min:"*",hour:"*",day:"*",month:"*",week:"?",year:""}},check:{type:Function,default:()=>{}}},emits:["update"],setup(Y,{emit:V}){const _=Y,t=r(0),m=r(0),a=r(1),n=r(0),s=r(0),p=r(0),i=r(1),c=r([]),x=r([]),U=g(()=>(n.value=_.check(n.value,t.value,m.value-1),s.value=_.check(s.value,n.value+1,m.value),n.value+"-"+s.value)),N=g(()=>(p.value=_.check(p.value,t.value,m.value-1),i.value=_.check(i.value,1,10),p.value+"/"+i.value)),w=g(()=>c.value.join(","));C(()=>_.cron.year,d=>B(d)),C([a,U,N,w],()=>O());function B(d){if(d==="")a.value=1;else if(d==="*")a.value=2;else if(d.indexOf("-")>-1){const e=d.split("-");n.value=Number(e[0]),s.value=Number(e[1]),a.value=3}else if(d.indexOf("/")>-1){const e=d.split("#");p.value=Number(e[1]),i.value=Number(e[0]),a.value=4}else c.value=[...new Set(d.split(",").map(e=>Number(e)))],a.value=5}function O(){switch(a.value){case 1:V("update","year","","year");break;case 2:V("update","year","*","year");break;case 3:V("update","year",U.value,"year");break;case 4:V("update","year",N.value,"year");break;case 5:c.value.length===0?c.value.push(x.value[0]):x.value=c.value,V("update","year",w.value,"year");break}}return A(()=>{t.value=Number(new Date().getFullYear()),m.value=t.value+10,n.value=t.value,s.value=n.value+1,p.value=t.value,x.value=[t.value]}),(d,e)=>{const b=f("el-radio"),y=f("el-form-item"),k=f("el-input-number"),R=f("el-option"),S=f("el-select"),T=f("el-form");return F(),L(T,{size:"small"},{default:o(()=>[u(y,null,{default:o(()=>[u(b,{label:1,modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l)},{default:o(()=>[v(" 不填，允许的通配符[, - * /] ")]),_:1},8,["modelValue"])]),_:1}),u(y,null,{default:o(()=>[u(b,{label:2,modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l)},{default:o(()=>[v(" 每年 ")]),_:1},8,["modelValue"])]),_:1}),u(y,null,{default:o(()=>[u(b,{label:3,modelValue:a.value,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value=l)},{default:o(()=>[v(" 周期从 "),u(k,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),min:t.value,max:m.value-1},null,8,["modelValue","min","max"]),v(" - "),u(k,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),min:n.value+1,max:m.value},null,8,["modelValue","min","max"])]),_:1},8,["modelValue"])]),_:1}),u(y,null,{default:o(()=>[u(b,{label:4,modelValue:a.value,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value=l)},{default:o(()=>[v(" 从 "),u(k,{modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=l=>p.value=l),min:t.value,max:m.value-1},null,8,["modelValue","min","max"]),v(" 年开始，每 "),u(k,{modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=l=>i.value=l),min:1,max:10},null,8,["modelValue"]),v(" 年执行一次 ")]),_:1},8,["modelValue"])]),_:1}),u(y,null,{default:o(()=>[u(b,{label:5,modelValue:a.value,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value=l)},{default:o(()=>[v(" 指定 "),u(S,{clearable:"",modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=l=>c.value=l),placeholder:"可多选",multiple:"","multiple-limit":8},{default:o(()=>[(F(),z(E,null,D(9,l=>u(R,{key:l,value:l-1+t.value,label:l-1+t.value},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}});const q=I(K,[["__scopeId","data-v-b1e232ce"]]);export{q as default};
