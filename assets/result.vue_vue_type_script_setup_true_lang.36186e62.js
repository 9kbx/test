import{K as he,r as R,w as ge,k as de,o as z,a as G,b as te,F as De,ab as me,X as pe}from"./vue.e20a9695.js";const xe={class:"popup-result",style:{"padding-left":"25px"}},ke=te("p",{class:"title"},"最近5次运行时间",-1),we={class:"popup-result-scroll"},ye={key:1},Oe=he({__name:"result",props:{ex:{type:String,default:""}},setup(ne){const U=ne,o=R(""),a=R(""),i=R([]),E=R([]),J=R(!1);ge(()=>U.ex,()=>Z());function Z(){J.value=!1;let e=U.ex.split(" "),n=0,l=[],u=new Date,r=u.getFullYear(),v=u.getMonth()+1,D=u.getDate(),h=u.getHours(),x=u.getMinutes(),B=u.getSeconds();oe(e[0]),se(e[1]),fe(e[2]),ue(e[3]),ie(e[4]),ae(e[5]),le(e[6],r);let w=i.value[0],k=i.value[1],m=i.value[2],p=i.value[3],g=i.value[4],K=i.value[5],P=Y(w,B),T=Y(k,x),V=Y(m,h),X=Y(p,D),j=Y(g,v),ee=Y(K,r);const q=function(){P=0,B=w[P]},C=function(){T=0,x=k[T],q()},H=function(){V=0,h=m[V],C()},y=function(){X=0,D=p[X],H()},M=function(){j=0,v=g[j],y()};r!==K[ee]&&M(),v!==g[j]&&y(),D!==p[X]&&H(),h!==m[V]&&C(),x!==k[T]&&q();e:for(let Q=ee;Q<K.length;Q++){let d=K[Q];if(v>g[g.length-1]){M();continue}t:for(let A=j;A<g.length;A++){let s=g[A];if(s=s<10?"0"+s:s,D>p[p.length-1]){if(y(),A===g.length-1){M();continue e}continue}n:for(let _=X;_<p.length;_++){let t=p[_],c=t<10?"0"+t:t;if(h>m[m.length-1]){if(H(),_===p.length-1){if(y(),A===g.length-1){M();continue e}continue t}continue}if(O(d+"-"+s+"-"+c+" 00:00:00")!==!0&&o.value!=="workDay"&&o.value!=="lastWeek"&&o.value!=="lastDay"){y();continue t}if(o.value==="lastDay"){if(O(d+"-"+s+"-"+c+" 00:00:00")!==!0)for(;t>0&&O(d+"-"+s+"-"+c+" 00:00:00")!==!0;)t--,c=t<10?"0"+t:t}else if(o.value==="workDay"){if(O(d+"-"+s+"-"+c+" 00:00:00")!==!0)for(;t>0&&O(d+"-"+s+"-"+c+" 00:00:00")!==!0;)t--,c=t<10?"0"+t:t;let f=L(new Date(d+"-"+s+"-"+c+" 00:00:00"),"week");f===1?(t++,c=t<10?"0"+t:t,O(d+"-"+s+"-"+c+" 00:00:00")!==!0&&(t-=3)):f===7&&(a.value!==1?t--:t+=2)}else if(o.value==="weekDay"){let f=L(new Date(d+"-"+s+"-"+t+" 00:00:00"),"week");if(a.value.indexOf(f)<0){if(_===p.length-1){if(y(),A===g.length-1){M();continue e}continue t}continue}}else if(o.value==="assWeek"){let f=L(new Date(d+"-"+s+"-"+t+" 00:00:00"),"week");a.value[1]>=f?t=(a.value[0]-1)*7+a.value[1]-f+1:t=a.value[0]*7+a.value[1]-f+1}else if(o.value==="lastWeek"){if(O(d+"-"+s+"-"+c+" 00:00:00")!==!0)for(;t>0&&O(d+"-"+s+"-"+c+" 00:00:00")!==!0;)t--,c=t<10?"0"+t:t;let f=L(new Date(d+"-"+s+"-"+c+" 00:00:00"),"week");a.value<f?t-=f-a.value:a.value>f&&(t-=7-(a.value-f))}t=t<10?"0"+t:t;l:for(let f=V;f<m.length;f++){let re=m[f]<10?"0"+m[f]:m[f];if(x>k[k.length-1]){if(C(),f===m.length-1){if(H(),_===p.length-1){if(y(),A===g.length-1){M();continue e}continue t}continue n}continue}i:for(let N=T;N<k.length;N++){let ce=k[N]<10?"0"+k[N]:k[N];if(B>w[w.length-1]){if(q(),N===k.length-1){if(C(),f===m.length-1){if(H(),_===p.length-1){if(y(),A===g.length-1){M();continue e}continue t}continue n}continue l}continue}for(let F=P;F<=w.length-1;F++){let ve=w[F]<10?"0"+w[F]:w[F];if(s!=="00"&&t!=="00"&&(l.push(d+"-"+s+"-"+t+" "+re+":"+ce+":"+ve),n++),n===5)break e;if(F===w.length-1){if(q(),N===k.length-1){if(C(),f===m.length-1){if(H(),_===p.length-1){if(y(),A===g.length-1){M();continue e}continue t}continue n}continue l}continue i}}}}}}}l.length===0?E.value=["没有达到条件的结果！"]:(E.value=l,l.length!==5&&E.value.push("最近100年内只有上面"+l.length+"条结果！")),J.value=!0}function Y(e,n){if(n<=e[0]||n>e[e.length-1])return 0;for(let l=0;l<e.length-1;l++)if(n>e[l]&&n<=e[l+1])return l+1}function le(e,n){i.value[5]=S(n,n+100),e!==void 0&&(e.indexOf("-")>=0?i.value[5]=W(e,n+100,!1):e.indexOf("/")>=0?i.value[5]=I(e,n+100):e!=="*"&&(i.value[5]=b(e)))}function ie(e){i.value[4]=S(1,12),e.indexOf("-")>=0?i.value[4]=W(e,12,!1):e.indexOf("/")>=0?i.value[4]=I(e,12):e!=="*"&&(i.value[4]=b(e))}function ae(e){if(o.value===""&&a.value==="")if(e.indexOf("-")>=0)o.value="weekDay",a.value=W(e,7,!1);else if(e.indexOf("#")>=0){o.value="assWeek";let n=e.match(/[0-9]{1}/g);a.value=[Number(n[1]),Number(n[0])],i.value[3]=[1],a.value[1]===7&&(a.value[1]=0)}else e.indexOf("L")>=0?(o.value="lastWeek",a.value=Number(e.match(/[0-9]{1,2}/g)[0]),i.value[3]=[31],a.value===7&&(a.value=0)):e!=="*"&&e!=="?"&&(o.value="weekDay",a.value=b(e))}function ue(e){i.value[3]=S(1,31),o.value="",a.value="",e.indexOf("-")>=0?(i.value[3]=W(e,31,!1),a.value="null"):e.indexOf("/")>=0?(i.value[3]=I(e,31),a.value="null"):e.indexOf("W")>=0?(o.value="workDay",a.value=Number(e.match(/[0-9]{1,2}/g)[0]),i.value[3]=[a.value]):e.indexOf("L")>=0?(o.value="lastDay",a.value="null",i.value[3]=[31]):e!=="*"&&e!=="?"?(i.value[3]=b(e),a.value="null"):e==="*"&&(a.value="null")}function fe(e){i.value[2]=S(0,23),e.indexOf("-")>=0?i.value[2]=W(e,24,!0):e.indexOf("/")>=0?i.value[2]=I(e,23):e!=="*"&&(i.value[2]=b(e))}function se(e){i.value[1]=S(0,59),e.indexOf("-")>=0?i.value[1]=W(e,60,!0):e.indexOf("/")>=0?i.value[1]=I(e,59):e!=="*"&&(i.value[1]=b(e))}function oe(e){i.value[0]=S(0,59),e.indexOf("-")>=0?i.value[0]=W(e,60,!0):e.indexOf("/")>=0?i.value[0]=I(e,59):e!=="*"&&(i.value[0]=b(e))}function S(e,n){let l=[];for(let u=e;u<=n;u++)l.push(u);return l}function b(e){let n=[],l=e.split(",");for(let u=0;u<l.length;u++)n[u]=Number(l[u]);return n.sort($),n}function I(e,n){let l=[],u=e.split("/"),r=Number(u[0]),v=Number(u[1]);for(;r<=n;)l.push(r),r+=v;return l}function W(e,n,l){let u=[],r=e.split("-"),v=Number(r[0]),D=Number(r[1]);v>D&&(D+=n);for(let h=v;h<=D;h++){let x=0;l===!1&&h%n===0&&(x=n),u.push(Math.round(h%n+x))}return u.sort($),u}function $(e,n){return n-e>0?-1:1}function L(e,n){let l=typeof e=="number"?new Date(e):e,u=l.getFullYear(),r=l.getMonth()+1,v=l.getDate(),D=l.getHours(),h=l.getMinutes(),x=l.getSeconds(),B=l.getDay();if(n===void 0)return u+"-"+(r<10?"0"+r:r)+"-"+(v<10?"0"+v:v)+" "+(D<10?"0"+D:D)+":"+(h<10?"0"+h:h)+":"+(x<10?"0"+x:x);if(n==="week")return B+1}function O(e){let n=new Date(e),l=L(n);return e===l}return de(()=>{Z()}),(e,n)=>(z(),G("div",xe,[ke,te("ul",we,[J.value?(z(!0),G(De,{key:0},me(E.value,l=>(z(),G("li",{key:l},pe(l),1))),128)):(z(),G("li",ye,"计算结果中..."))])]))}});export{Oe as _};
