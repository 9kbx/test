import{f,e as Z}from"./index.b8a2e51c.js";import{S as ee}from"./sys-pos-api.d6aa2d42.js";import{S as le}from"./sys-role-api.0af1cf09.js";import{S as v}from"./sys-user-api.f03142d7.js";import{K as q,r as ae,a1 as oe,k as re,ak as s,au as te,o as i,a as g,Y as e,S as a,b as c,X as x,W as F,T as de,R as _,F as U,ab as D,V as T}from"./vue.e20a9695.js";const se={class:"sys-user-container"},ue={style:{color:"#fff"}},me=c("div",{style:{color:"#b1b3b8"}},"机构组织",-1),ne={key:0},ie=c("div",{style:{color:"#b1b3b8"}},"附属机构",-1),pe=c("span",{style:{"font-size":"12px",color:"gray","padding-left":"5px"}}," 具有相应组织机构的数据权限 ",-1),be=c("span",{class:"ml5"},"机构",-1),ce={key:0},ge={class:"dialog-footer"},fe=q({name:"sysEditUser"}),ve=q({...fe,props:{title:String,orgData:Array},setup(A,{expose:M}){const I=A,L=ae(),l=oe({loading:!1,isShowDialog:!1,selectedTabName:"0",ruleForm:{},posData:[],roleData:[]});re(async()=>{l.loading=!0;var n=await f(ee).apiSysPosListGet();l.posData=n.data.result??[];var r=await f(le).apiSysRoleListGet();l.roleData=r.data.result??[],l.loading=!1});const R=async n=>{if(l.selectedTabName="0",l.ruleForm=JSON.parse(JSON.stringify(n)),JSON.stringify(n)!=="{}"){var r=await f(v).apiSysUserOwnRoleListUserIdGet(n.id);l.ruleForm.roleIdList=r.data.result;var w=await f(v).apiSysUserOwnExtOrgListUserIdGet(n.id);l.ruleForm.extOrgIdList=w.data.result,l.isShowDialog=!0}else l.isShowDialog=!0},z=()=>{Z.emit("submitRefresh"),l.isShowDialog=!1},E=()=>{l.isShowDialog=!1},j=()=>{L.value.validate(async n=>{n&&(l.ruleForm.id!=null&&l.ruleForm.id>0?await f(v).apiSysUserUpdatePost(l.ruleForm):await f(v).apiSysUserAddPost(l.ruleForm),z())})},B=()=>{var n;l.ruleForm.extOrgIdList==null&&(l.ruleForm.extOrgIdList=[]),(n=l.ruleForm.extOrgIdList)==null||n.push({})},G=n=>{var r;(r=l.ruleForm.extOrgIdList)==null||r.splice(n,1)};return M({openDialog:R}),(n,r)=>{const w=s("ele-Edit"),J=s("el-icon"),u=s("el-input"),d=s("el-form-item"),t=s("el-col"),k=s("el-date-picker"),S=s("el-radio"),$=s("el-radio-group"),m=s("el-option"),V=s("el-select"),K=s("el-input-number"),N=s("el-divider"),O=s("el-cascader"),y=s("el-button"),h=s("el-row"),W=s("el-empty"),Y=s("el-form"),C=s("el-tab-pane"),X=s("el-tabs"),H=s("el-dialog"),Q=te("loading");return i(),g("div",se,[e(H,{modelValue:l.isShowDialog,"onUpdate:modelValue":r[26]||(r[26]=o=>l.isShowDialog=o),draggable:"","close-on-click-modal":!1,width:"769px"},{header:a(()=>[c("div",ue,[e(J,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:a(()=>[e(w)]),_:1}),c("span",null,x(I.title),1)])]),footer:a(()=>[c("span",ge,[e(y,{onClick:E,size:"default"},{default:a(()=>[F("取 消")]),_:1}),e(y,{type:"primary",onClick:j,size:"default"},{default:a(()=>[F("确 定")]),_:1})])]),default:a(()=>[de((i(),_(X,{modelValue:l.selectedTabName,"onUpdate:modelValue":r[25]||(r[25]=o=>l.selectedTabName=o)},{default:a(()=>[e(C,{label:"基础信息"},{default:a(()=>[e(Y,{model:l.ruleForm,ref_key:"ruleFormRef",ref:L,size:"default","label-width":"100px"},{default:a(()=>[e(h,{gutter:35},{default:a(()=>[e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"账号名称",prop:"account",rules:[{required:!0,message:"账号名称不能为空",trigger:"blur"}]},{default:a(()=>[e(u,{modelValue:l.ruleForm.account,"onUpdate:modelValue":r[0]||(r[0]=o=>l.ruleForm.account=o),placeholder:"账号名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"真实姓名",prop:"realName",rules:[{required:!0,message:"真实姓名不能为空",trigger:"blur"}]},{default:a(()=>[e(u,{modelValue:l.ruleForm.realName,"onUpdate:modelValue":r[1]||(r[1]=o=>l.ruleForm.realName=o),placeholder:"真实姓名",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"昵称",prop:"nickName"},{default:a(()=>[e(u,{modelValue:l.ruleForm.nickName,"onUpdate:modelValue":r[2]||(r[2]=o=>l.ruleForm.nickName=o),placeholder:"昵称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"手机号码",prop:"phone",rules:[{required:!0,message:"手机号码不能为空",trigger:"blur"}]},{default:a(()=>[e(u,{modelValue:l.ruleForm.phone,"onUpdate:modelValue":r[3]||(r[3]=o=>l.ruleForm.phone=o),placeholder:"手机号码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"出生日期",prop:"birthday",rules:[{required:!0,message:"出生日期不能为空",trigger:"blur"}]},{default:a(()=>[e(k,{modelValue:l.ruleForm.birthday,"onUpdate:modelValue":r[4]||(r[4]=o=>l.ruleForm.birthday=o),type:"date",placeholder:"出生日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"性别",prop:"sex"},{default:a(()=>[e($,{modelValue:l.ruleForm.sex,"onUpdate:modelValue":r[5]||(r[5]=o=>l.ruleForm.sex=o)},{default:a(()=>[e(S,{label:1},{default:a(()=>[F("男")]),_:1}),e(S,{label:2},{default:a(()=>[F("女")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12},{default:a(()=>[e(d,{label:"角色",prop:"roleIdList",rules:[{required:!0,message:"角色集合不能为空",trigger:"blur"}]},{default:a(()=>[e(V,{modelValue:l.ruleForm.roleIdList,"onUpdate:modelValue":r[6]||(r[6]=o=>l.ruleForm.roleIdList=o),multiple:"","value-key":"id",clearable:"",placeholder:"角色集合","collapse-tags":"","collapse-tags-tooltip":"",class:"w100",filterable:""},{default:a(()=>[(i(!0),g(U,null,D(l.roleData,o=>(i(),_(m,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb5"},{default:a(()=>[e(d,{label:"排序"},{default:a(()=>[e(K,{modelValue:l.ruleForm.orderNo,"onUpdate:modelValue":r[7]||(r[7]=o=>l.ruleForm.orderNo=o),placeholder:"排序",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,{"border-style":"dashed","content-position":"center"},{default:a(()=>[me]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"所属机构",prop:"orgId",rules:[{required:!0,message:"所属机构不能为空",trigger:"blur"}]},{default:a(()=>[e(O,{options:I.orgData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",expandTrigger:"hover"},placeholder:"所属机构",clearable:"",class:"w100",modelValue:l.ruleForm.orgId,"onUpdate:modelValue":r[8]||(r[8]=o=>l.ruleForm.orgId=o)},{default:a(({node:o,data:p})=>[c("span",null,x(p.name),1),o.isLeaf?T("",!0):(i(),g("span",ne," ("+x(p.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"职位",prop:"posId",rules:[{required:!0,message:"职位名称不能为空",trigger:"blur"}]},{default:a(()=>[e(V,{modelValue:l.ruleForm.posId,"onUpdate:modelValue":r[9]||(r[9]=o=>l.ruleForm.posId=o),placeholder:"职位",style:{width:"100%"}},{default:a(()=>[(i(!0),g(U,null,D(l.posData,o=>(i(),_(m,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"工号",prop:"jobNum"},{default:a(()=>[e(u,{modelValue:l.ruleForm.jobNum,"onUpdate:modelValue":r[10]||(r[10]=o=>l.ruleForm.jobNum=o),placeholder:"工号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"入职日期",prop:"joinDate"},{default:a(()=>[e(k,{modelValue:l.ruleForm.joinDate,"onUpdate:modelValue":r[11]||(r[11]=o=>l.ruleForm.joinDate=o),type:"date",placeholder:"入职日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(N,{"border-style":"dashed","content-position":"center"},{default:a(()=>[ie]),_:1}),e(t,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:a(()=>[e(y,{icon:"ele-Plus",type:"primary",plain:"",onClick:B},{default:a(()=>[F(" 增加附属机构 ")]),_:1}),pe]),_:1}),e(t,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:a(()=>[l.ruleForm.extOrgIdList!=null&&l.ruleForm.extOrgIdList.length>0?(i(!0),g(U,{key:0},D(l.ruleForm.extOrgIdList,(o,p)=>(i(),_(h,{gutter:35,key:p},{default:a(()=>[e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"机构",prop:`extOrgIdList[${p}].orgId`,rules:[{required:!0,message:"机构不能为空",trigger:"blur"}]},{label:a(()=>[e(y,{icon:"ele-Delete",type:"danger",circle:"",plain:"",size:"small",onClick:b=>G(p)},null,8,["onClick"]),be]),default:a(()=>[e(O,{options:I.orgData,props:{checkStrictly:!0,emitPath:!1,value:"id",label:"name",expandTrigger:"hover"},placeholder:"机构组织",clearable:"",class:"w100",modelValue:l.ruleForm.extOrgIdList[p].orgId,"onUpdate:modelValue":b=>l.ruleForm.extOrgIdList[p].orgId=b},{default:a(({node:b,data:P})=>[c("span",null,x(P.name),1),b.isLeaf?T("",!0):(i(),g("span",ce," ("+x(P.children.length)+") ",1))]),_:2},1032,["options","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"职位",prop:`extOrgIdList[${p}].posId`,rules:[{required:!0,message:"职位不能为空",trigger:"blur"}]},{default:a(()=>[e(V,{modelValue:l.ruleForm.extOrgIdList[p].posId,"onUpdate:modelValue":b=>l.ruleForm.extOrgIdList[p].posId=b,placeholder:"职位名称",style:{width:"100%"}},{default:a(()=>[(i(!0),g(U,null,D(l.posData,b=>(i(),_(m,{key:b.id,label:b.name,value:b.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)]),_:2},1024))),128)):(i(),_(W,{key:1,description:"空"}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(C,{label:"档案信息"},{default:a(()=>[e(Y,{model:l.ruleForm,size:"default","label-width":"100px"},{default:a(()=>[e(h,{gutter:35},{default:a(()=>[e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"证件类型",prop:"cardType"},{default:a(()=>[e(V,{modelValue:l.ruleForm.cardType,"onUpdate:modelValue":r[12]||(r[12]=o=>l.ruleForm.cardType=o),placeholder:"证件类型",style:{width:"100%"}},{default:a(()=>[e(m,{label:"身份证",value:0}),e(m,{label:"护照",value:1}),e(m,{label:"出生证",value:2}),e(m,{label:"港澳台通行证",value:3}),e(m,{label:"外国人居留证",value:4})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"证件号码",prop:"idCardNum"},{default:a(()=>[e(u,{modelValue:l.ruleForm.idCardNum,"onUpdate:modelValue":r[13]||(r[13]=o=>l.ruleForm.idCardNum=o),placeholder:"证件号码",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"民族",prop:"nation"},{default:a(()=>[e(u,{modelValue:l.ruleForm.nation,"onUpdate:modelValue":r[14]||(r[14]=o=>l.ruleForm.nation=o),placeholder:"民族",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"邮箱",prop:"email"},{default:a(()=>[e(u,{modelValue:l.ruleForm.email,"onUpdate:modelValue":r[15]||(r[15]=o=>l.ruleForm.email=o),placeholder:"邮箱",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:a(()=>[e(d,{label:"地址",prop:"nation"},{default:a(()=>[e(u,{modelValue:l.ruleForm.address,"onUpdate:modelValue":r[16]||(r[16]=o=>l.ruleForm.address=o),placeholder:"地址",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"毕业学校",prop:"college"},{default:a(()=>[e(u,{modelValue:l.ruleForm.college,"onUpdate:modelValue":r[17]||(r[17]=o=>l.ruleForm.college=o),placeholder:"毕业学校",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"文化程度",prop:"cultureLevel"},{default:a(()=>[e(V,{modelValue:l.ruleForm.cultureLevel,"onUpdate:modelValue":r[18]||(r[18]=o=>l.ruleForm.cultureLevel=o),placeholder:"文化程度",style:{width:"100%"}},{default:a(()=>[e(m,{label:"小学",value:0}),e(m,{label:"初中",value:1}),e(m,{label:"高中",value:2}),e(m,{label:"中专",value:3}),e(m,{label:"大专",value:4}),e(m,{label:"本科",value:5}),e(m,{label:"硕士研究生",value:6}),e(m,{label:"博士研究生",value:7})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"政治面貌",prop:"politicalOutlook"},{default:a(()=>[e(u,{modelValue:l.ruleForm.politicalOutlook,"onUpdate:modelValue":r[19]||(r[19]=o=>l.ruleForm.politicalOutlook=o),placeholder:"政治面貌",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"办公电话",prop:"officePhone"},{default:a(()=>[e(u,{modelValue:l.ruleForm.officePhone,"onUpdate:modelValue":r[20]||(r[20]=o=>l.ruleForm.officePhone=o),placeholder:"办公电话",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"紧急联系人",prop:"emergencyContact"},{default:a(()=>[e(u,{modelValue:l.ruleForm.emergencyContact,"onUpdate:modelValue":r[21]||(r[21]=o=>l.ruleForm.emergencyContact=o),placeholder:"紧急联系人",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:a(()=>[e(d,{label:"联系人电话",prop:"emergencyPhone"},{default:a(()=>[e(u,{modelValue:l.ruleForm.emergencyPhone,"onUpdate:modelValue":r[22]||(r[22]=o=>l.ruleForm.emergencyPhone=o),placeholder:"联系人电话",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:a(()=>[e(d,{label:"联系人地址",prop:"emergencyAddress"},{default:a(()=>[e(u,{modelValue:l.ruleForm.emergencyAddress,"onUpdate:modelValue":r[23]||(r[23]=o=>l.ruleForm.emergencyAddress=o),placeholder:"紧急联系人",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),e(t,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:a(()=>[e(d,{label:"备注",prop:"remark"},{default:a(()=>[e(u,{modelValue:l.ruleForm.remark,"onUpdate:modelValue":r[24]||(r[24]=o=>l.ruleForm.remark=o),placeholder:"备注",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])),[[Q,l.loading]])]),_:1},8,["modelValue"])])}}});export{ve as _};
