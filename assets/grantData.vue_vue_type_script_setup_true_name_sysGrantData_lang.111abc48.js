import{K as v,r as C,a1 as R,ak as a,o as c,a as p,Y as o,S as l,b as d,W as f,F as z,ab as B,T as L,Z as E,R as G}from"./vue.e20a9695.js";import I from"./orgTree.1fc0c91b.js";import{f as g}from"./index.96b44ad7.js";import{S}from"./sys-role-api.f6be32af.js";const K={class:"sys-grantData-container"},N={style:{color:"#fff"}},O=d("span",null," 授权数据范围 ",-1),A={class:"dialog-footer"},P=v({name:"sysGrantData"}),q=v({...P,setup(U,{expose:y}){const i=C(),e=R({isShowDialog:!1,ruleForm:{},dataScopeType:[{value:1,label:"全部数据"},{value:2,label:"本部门及以下数据"},{value:3,label:"本部门数据"},{value:4,label:"仅本人数据"},{value:5,label:"自定义数据"}]}),b=async s=>{e.ruleForm=s;var n=await g(S).apiSysRoleOwnOrgListGet(s.id);setTimeout(()=>{var r;(r=i.value)==null||r.setCheckedKeys(n.data.result)},100),e.isShowDialog=!0},h=()=>{e.isShowDialog=!1},w=async()=>{var s;e.ruleForm.dataScope===5&&(e.ruleForm.orgIdList=(s=i.value)==null?void 0:s.getCheckedKeys()),await g(S).apiSysRoleGrantDataScopePost(e.ruleForm),e.isShowDialog=!1};return y({openDialog:b}),(s,n)=>{const r=a("ele-Edit"),D=a("el-icon"),F=a("el-option"),k=a("el-select"),_=a("el-form-item"),m=a("el-col"),x=a("el-row"),V=a("el-form"),u=a("el-button"),T=a("el-dialog");return c(),p("div",K,[o(T,{modelValue:e.isShowDialog,"onUpdate:modelValue":n[1]||(n[1]=t=>e.isShowDialog=t),draggable:"",width:"450px"},{header:l(()=>[d("div",N,[o(D,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:l(()=>[o(r)]),_:1}),O])]),footer:l(()=>[d("span",A,[o(u,{onClick:h,size:"default"},{default:l(()=>[f("取 消")]),_:1}),o(u,{type:"primary",onClick:w,size:"default"},{default:l(()=>[f("确 定")]),_:1})])]),default:l(()=>[o(V,{model:e.ruleForm,size:"default","label-position":"top"},{default:l(()=>[o(x,{gutter:35},{default:l(()=>[o(m,{xs:24,sm:24,md:24,lg:24,xl1:24,class:"mb20"},{default:l(()=>[o(_,{prop:"dataScope",label:"数据范围："},{default:l(()=>[o(k,{modelValue:e.ruleForm.dataScope,"onUpdate:modelValue":n[0]||(n[0]=t=>e.ruleForm.dataScope=t),placeholder:"数据范围",style:{width:"100%"}},{default:l(()=>[(c(!0),p(z,null,B(e.dataScopeType,t=>(c(),G(F,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),L(o(m,{xs:24,sm:24,md:24,lg:24,xl1:24},{default:l(()=>[o(_,{prop:"orgIdList",label:"机构列表："},{default:l(()=>[o(I,{ref_key:"orgTreeRef",ref:i,class:"w100"},null,512)]),_:1})]),_:1},512),[[E,e.ruleForm.dataScope===5]])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});export{q as _};
