import{g as d,D as T}from"./index.122dcd40.js";import{S as m}from"./sys-tenant-api.14d9ba21.js";import{K as g,r as V,a1 as G,k as L,ak as a,au as z,o as p,a as B,Y as s,S as o,b as _,W as f,T as E,R as K,aE as N,aF as A}from"./vue.e20a9695.js";import{_ as R}from"./_plugin-vue_export-helper.c27b6911.js";import"./monacoEditor.48edecf2.js";const P=r=>(N("data-v-3b2af29c"),r=r(),A(),r),O={class:"sys-grantMenu-container"},U={style:{color:"#fff"}},W=P(()=>_("span",null," 授权租户菜单 ",-1)),Y={class:"dialog-footer"},j=g({name:"sysGrantMenu"}),q=g({...j,setup(r,{expose:h}){const c=V(),e=G({loading:!1,isShowDialog:!1,ruleForm:{id:0,menuIdList:[]},menuData:[]});L(async()=>{e.loading=!0;var t=await d(T).apiSysMenuListGet();e.menuData=t.data.result,e.loading=!1});const y=async t=>{var n;(n=c.value)==null||n.setCheckedKeys([]),e.ruleForm=t;var l=await d(m).apiSysTenantOwnMenuListGet(t.userId);setTimeout(()=>{var i;(i=c.value)==null||i.setCheckedKeys(l.data.result)},100),e.isShowDialog=!0},v=()=>{e.isShowDialog=!1},k=async()=>{var t;e.ruleForm.menuIdList=(t=c.value)==null?void 0:t.getCheckedKeys(),await d(m).apiSysTenantGrantMenuPost(e.ruleForm),e.isShowDialog=!1},w=t=>{var n;let l=!0;for(const i in t.children)if(((n=t.children[i].children)==null?void 0:n.length)??0>0){l=!1;break}return l?"penultimate-node":""};return h({openDialog:y}),(t,l)=>{const n=a("ele-Edit"),i=a("el-icon"),S=a("el-tree"),D=a("el-form-item"),b=a("el-col"),x=a("el-row"),C=a("el-form"),u=a("el-button"),M=a("el-dialog"),I=z("loading");return p(),B("div",O,[s(M,{modelValue:e.isShowDialog,"onUpdate:modelValue":l[0]||(l[0]=F=>e.isShowDialog=F),draggable:"","close-on-click-modal":!1,width:"769px"},{header:o(()=>[_("div",U,[s(i,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:o(()=>[s(n)]),_:1}),W])]),footer:o(()=>[_("span",Y,[s(u,{onClick:v,size:"default"},{default:o(()=>[f("取 消")]),_:1}),s(u,{type:"primary",onClick:k,size:"default"},{default:o(()=>[f("确 定")]),_:1})])]),default:o(()=>[E((p(),K(C,{model:e.ruleForm,size:"default"},{default:o(()=>[s(x,{gutter:35},{default:o(()=>[s(b,{xs:24,sm:24,md:24,lg:24,xl1:24},{default:o(()=>[s(D,{prop:"orgIdList",label:""},{default:o(()=>[s(S,{ref_key:"treeRef",ref:c,data:e.menuData,"node-key":"id","show-checkbox":"",props:{children:"children",label:"title",class:w},icon:"ele-Menu","highlight-current":"","default-expand-all":""},null,8,["data","props"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[I,e.loading]])]),_:1},8,["modelValue"])])}}});const $=R(q,[["__scopeId","data-v-3b2af29c"]]);export{$ as default};
