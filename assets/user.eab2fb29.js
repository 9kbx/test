import{_ as z}from"./monacoEditor.48edecf2.js";import{K as $,aC as L,aG as le,az as P,r as R,a1 as ae,l as B,k as re,a0 as ie,ak as d,o as ce,a as ue,Y as n,S as t,W as _,X as w,b as i,M as N,u as b,O as de}from"./vue.e20a9695.js";import{a as me,l as fe,u as _e,L as v,g as M,e as I,J as ge,E as be,f as he,y as pe,H as we,o as ve}from"./index.a169e15e.js";import{S as Se}from"./sys-notice-api.7c7542d9.js";import{c as Ce}from"./signalR.df10fe5a.js";import{_ as Ee}from"./_plugin-vue_export-helper.c27b6911.js";const T=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],g=(()=>{if(typeof document>"u")return!1;const s=T[0],r={};for(const o of T)if((o==null?void 0:o[1])in document){for(const[p,u]of o.entries())r[s[p]]=u;return r}return!1})(),U={change:g.fullscreenchange,error:g.fullscreenerror};let c={request(s=document.documentElement,r){return new Promise((o,h)=>{const p=()=>{c.off("change",p),o()};c.on("change",p);const u=s[g.requestFullscreen](r);u instanceof Promise&&u.then(p).catch(h)})},exit(){return new Promise((s,r)=>{if(!c.isFullscreen){s();return}const o=()=>{c.off("change",o),s()};c.on("change",o);const h=document[g.exitFullscreen]();h instanceof Promise&&h.then(o).catch(r)})},toggle(s,r){return c.isFullscreen?c.exit():c.request(s,r)},onchange(s){c.on("change",s)},onerror(s){c.on("error",s)},on(s,r){const o=U[s];o&&document.addEventListener(o,r,!1)},off(s,r){const o=U[s];o&&document.removeEventListener(o,r,!1)},raw:g};Object.defineProperties(c,{isFullscreen:{get:()=>!!document[g.fullscreenElement]},element:{enumerable:!0,get:()=>document[g.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[g.fullscreenEnabled]}});g||(c={isEnabled:!1});const y=c,ye={class:"layout-navbars-breadcrumb-user-icon"},ke=["title"],Fe={class:"layout-navbars-breadcrumb-user-icon"},ze=["title"],Le=["title"],Ie={class:"layout-navbars-breadcrumb-user-icon"},Oe=["title"],Ae={class:"layout-navbars-breadcrumb-user-link"},Pe=["src"],Re=$({name:"layoutBreadcrumbUser"}),Be=$({...Re,setup(s){const r=L(()=>z(()=>import("./userNews.fd505a50.js"),["assets/userNews.fd505a50.js","assets/vue.e20a9695.js","assets/index.a169e15e.js","assets/monacoEditor.48edecf2.js","assets/monacoEditor.a4885f8c.css","assets/index.0dd60a87.css","assets/commonFunction.87d6ae83.js","assets/formatTime.29ac8c52.js","assets/sys-notice-api.7c7542d9.js","assets/_plugin-vue_export-helper.c27b6911.js","assets/userNews.e7f6ced9.css"])),o=L(()=>z(()=>import("./search.d5bc7f4c.js"),["assets/search.d5bc7f4c.js","assets/vue.e20a9695.js","assets/index.a169e15e.js","assets/monacoEditor.48edecf2.js","assets/monacoEditor.a4885f8c.css","assets/index.0dd60a87.css","assets/_plugin-vue_export-helper.c27b6911.js","assets/search.7a2dee94.css"])),h=L(()=>z(()=>import("./index.0e05782d.js"),["assets/index.0e05782d.js","assets/vue.e20a9695.js","assets/index.a169e15e.js","assets/monacoEditor.48edecf2.js","assets/monacoEditor.a4885f8c.css","assets/index.0dd60a87.css","assets/signalR.df10fe5a.js"])),{locale:p,t:u}=me(),x=le(),q=fe(),D=_e(),{userInfos:k}=P(q),{themeConfig:S}=P(D),O=R(),A=R(),l=ae({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:"large",noticeList:[]}),V=B(()=>{let e="";const{layout:m,isClassicSplitMenu:a}=S.value;return["defaults","columns"].includes(m)||m==="classic"&&!a?e="1":e="",e}),H=B(()=>l.noticeList.some(e=>e.readStatus==null||e.readStatus==0)),j=()=>{if(!y.isEnabled)return be.warning("暂不不支持全屏"),!1;y.toggle(),y.on("change",()=>{y.isFullscreen?l.isScreenfull=!0:l.isScreenfull=!1})},G=()=>{I.emit("openSetingsDrawer")},J=e=>{e==="logOut"?he({closeOnClickModal:!1,closeOnPressEscape:!1,title:u("message.user.logOutTitle"),message:u("message.user.logOutMessage"),type:"warning",showCancelButton:!0,confirmButtonText:u("message.user.logOutConfirm"),cancelButtonText:u("message.user.logOutCancel"),buttonSize:"default",beforeClose:async(m,a,f)=>{m==="confirm"&&(a.confirmButtonLoading=!0,a.confirmButtonText=u("message.user.logOutExit"),await M(pe).apiSysAuthLogoutPost(),a.confirmButtonLoading=!1),f()}}).then(async()=>{we()}).catch(()=>{}):e==="wareHouse"?window.open("https://gitee.com/zuohuaijun/Admin.NET"):x.push(e)},K=()=>{O.value.openSearch()},W=()=>{A.value.openDrawer()},X=e=>{v.remove("themeConfig"),S.value.globalComponentSize=e,v.set("themeConfig",S.value),C("globalComponentSize","disabledSize"),window.location.reload()},Y=e=>{v.remove("themeConfig"),S.value.globalI18n=e,v.set("themeConfig",S.value),p.value=e,ve.useTitle(),C("globalI18n","disabledI18n")},C=(e,m)=>{l[m]=v.get("themeConfig")[e]};re(async()=>{v.get("themeConfig")&&(C("globalComponentSize","disabledSize"),C("globalI18n","disabledI18n"));var e=await M(Se).apiSysNoticeUnReadListGet();l.noticeList=e.data.result??[],Ce.on("PublicNotice",Q),I.on("noticeRead",m=>{const a=l.noticeList.find(f=>f.id==m);a!=null&&(a.readStatus=1)})}),ie(()=>{I.off("noticeRead",()=>{})});const Q=e=>{l.noticeList.unshift(e),ge({title:"提示",message:"您有一条新消息...",type:"info",position:"bottom-right"})};return(e,m)=>{const a=d("el-dropdown-item"),f=d("el-dropdown-menu"),F=d("el-dropdown"),Z=d("ele-Search"),E=d("el-icon"),ee=d("ele-Bell"),ne=d("el-badge"),te=d("el-popover"),oe=d("ele-User"),se=d("ele-ArrowDown");return ce(),ue("div",{class:"layout-navbars-breadcrumb-user pr15",style:de({flex:b(V)})},[n(F,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:X},{dropdown:t(()=>[n(f,null,{default:t(()=>[n(a,{command:"large",disabled:l.disabledSize==="large"},{default:t(()=>[_(w(e.$t("message.user.dropdownLarge")),1)]),_:1},8,["disabled"]),n(a,{command:"default",disabled:l.disabledSize==="default"},{default:t(()=>[_(w(e.$t("message.user.dropdownDefault")),1)]),_:1},8,["disabled"]),n(a,{command:"small",disabled:l.disabledSize==="small"},{default:t(()=>[_(w(e.$t("message.user.dropdownSmall")),1)]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[i("div",ye,[i("i",{class:"iconfont icon-ziti",title:e.$t("message.user.title0")},null,8,ke)])]),_:1}),n(F,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:Y},{dropdown:t(()=>[n(f,null,{default:t(()=>[n(a,{command:"zh-cn",disabled:l.disabledI18n==="zh-cn"},{default:t(()=>[_("简体中文")]),_:1},8,["disabled"]),n(a,{command:"en",disabled:l.disabledI18n==="en"},{default:t(()=>[_("English")]),_:1},8,["disabled"]),n(a,{command:"zh-tw",disabled:l.disabledI18n==="zh-tw"},{default:t(()=>[_("繁體中文")]),_:1},8,["disabled"])]),_:1})]),default:t(()=>[i("div",Fe,[i("i",{class:N(["iconfont",l.disabledI18n==="en"?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"]),title:e.$t("message.user.title1")},null,10,ze)])]),_:1}),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:K},[n(E,{title:e.$t("message.user.title2")},{default:t(()=>[n(Z)]),_:1},8,["title"])]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:G},[i("i",{class:"icon-skin iconfont",title:e.$t("message.user.title3")},null,8,Le)]),i("div",Ie,[n(te,{placement:"bottom",trigger:"hover",transition:"el-zoom-in-top",width:300,persistent:!1},{reference:t(()=>[n(ne,{"is-dot":b(H)},{default:t(()=>[n(E,{title:e.$t("message.user.title4")},{default:t(()=>[n(ee)]),_:1},8,["title"])]),_:1},8,["is-dot"])]),default:t(()=>[n(b(r),{noticeList:l.noticeList},null,8,["noticeList"])]),_:1})]),i("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:j},[i("i",{class:N(["iconfont",l.isScreenfull?"icon-tuichuquanping":"icon-fullscreen"]),title:l.isScreenfull?e.$t("message.user.title6"):e.$t("message.user.title5")},null,10,Oe)]),i("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:W},[n(E,{title:"在线用户"},{default:t(()=>[n(oe)]),_:1})]),n(F,{"show-timeout":70,"hide-timeout":50,onCommand:J},{dropdown:t(()=>[n(f,null,{default:t(()=>[n(a,{command:"/system/userCenter"},{default:t(()=>[_(w(e.$t("message.user.dropdown2")),1)]),_:1}),n(a,{divided:"",command:"logOut"},{default:t(()=>[_(w(e.$t("message.user.dropdown5")),1)]),_:1})]),_:1})]),default:t(()=>[i("span",Ae,[i("img",{src:b(k).avatar,class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,Pe),_(" "+w(b(k).account===""?"common":b(k).account)+" ",1),n(E,{class:"el-icon--right"},{default:t(()=>[n(se)]),_:1})])]),_:1}),n(b(o),{ref_key:"searchRef",ref:O},null,512),n(b(h),{ref_key:"onlineUserRef",ref:A},null,512)],4)}}});const qe=Ee(Be,[["__scopeId","data-v-356694c1"]]);export{qe as default};
