import{f as c,D as O,e as I}from"./index.b00245d2.js";import{S as f}from"./sys-role-api.0c969542.js";import{K as v,r as h,a1 as J,k as L,ak as t,au as P,o as F,a as T,Y as l,S as o,b as g,X as q,W as _,T as G,R as W}from"./vue.e20a9695.js";import{_ as X}from"./_plugin-vue_export-helper.c27b6911.js";import"./monacoEditor.48edecf2.js";const Y={class:"sys-role-container"},j={style:{color:"#fff"}},H={class:"dialog-footer"},Q=v({name:"sysEditRole"}),Z=v({...Q,props:{title:String},setup(V,{expose:k}){const S=V,b=h(),m=h(),e=J({loading:!1,isShowDialog:!1,ruleForm:{},menuData:[]});L(async()=>{e.loading=!0;var s=await c(O).apiSysMenuListGet();e.menuData=s.data.result??[],e.loading=!1});const w=async s=>{var n;if((n=m.value)==null||n.setCheckedKeys([]),e.ruleForm=JSON.parse(JSON.stringify(s)),JSON.stringify(s)!=="{}"){var a=await c(f).apiSysRoleOwnMenuListGet(s.id);setTimeout(()=>{var d;(d=m.value)==null||d.setCheckedKeys(a.data.result)},100)}e.isShowDialog=!0},D=()=>{I.emit("submitRefresh"),e.isShowDialog=!1},R=()=>{e.isShowDialog=!1},C=()=>{b.value.validate(async s=>{var a;s&&(e.ruleForm.menuIdList=(a=m.value)==null?void 0:a.getCheckedKeys(),e.ruleForm.id!=null&&e.ruleForm.id>0?await c(f).apiSysRoleUpdatePost(e.ruleForm):await c(f).apiSysRoleAddPost(e.ruleForm),D())})},N=s=>{var n;let a=!0;for(const d in s.children)if(((n=s.children[d].children)==null?void 0:n.length)??0>0){a=!1;break}return a?"penultimate-node":""};return k({openDialog:w}),(s,a)=>{const n=t("ele-Edit"),d=t("el-icon"),p=t("el-input"),i=t("el-form-item"),u=t("el-col"),U=t("el-input-number"),y=t("el-radio"),E=t("el-radio-group"),M=t("el-tree"),z=t("el-row"),A=t("el-form"),x=t("el-button"),B=t("el-dialog"),K=P("loading");return F(),T("div",Y,[l(B,{modelValue:e.isShowDialog,"onUpdate:modelValue":a[5]||(a[5]=r=>e.isShowDialog=r),draggable:"","close-on-click-modal":!1,width:"769px"},{header:o(()=>[g("div",j,[l(d,{size:"16",style:{"margin-right":"3px",display:"inline","vertical-align":"middle"}},{default:o(()=>[l(n)]),_:1}),g("span",null,q(S.title),1)])]),footer:o(()=>[g("span",H,[l(x,{onClick:R,size:"default"},{default:o(()=>[_("取 消")]),_:1}),l(x,{type:"primary",onClick:C,size:"default"},{default:o(()=>[_("确 定")]),_:1})])]),default:o(()=>[l(A,{model:e.ruleForm,ref_key:"ruleFormRef",ref:b,size:"default","label-width":"80px"},{default:o(()=>[l(z,{gutter:35},{default:o(()=>[l(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(i,{label:"角色名称",prop:"name",rules:[{required:!0,message:"角色名称不能为空",trigger:"blur"}]},{default:o(()=>[l(p,{modelValue:e.ruleForm.name,"onUpdate:modelValue":a[0]||(a[0]=r=>e.ruleForm.name=r),placeholder:"角色名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(i,{label:"角色编码",prop:"code",rules:[{required:!0,message:"角色编码不能为空",trigger:"blur"}]},{default:o(()=>[l(p,{modelValue:e.ruleForm.code,"onUpdate:modelValue":a[1]||(a[1]=r=>e.ruleForm.code=r),placeholder:"角色编码",clearable:"",disabled:e.ruleForm.code=="sys_admin"&&e.ruleForm.id!=null},null,8,["modelValue","disabled"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(i,{label:"排序"},{default:o(()=>[l(U,{modelValue:e.ruleForm.orderNo,"onUpdate:modelValue":a[2]||(a[2]=r=>e.ruleForm.orderNo=r),placeholder:"排序",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:12,md:12,lg:12,xl:12,class:"mb20"},{default:o(()=>[l(i,{label:"状态"},{default:o(()=>[l(E,{modelValue:e.ruleForm.status,"onUpdate:modelValue":a[3]||(a[3]=r=>e.ruleForm.status=r)},{default:o(()=>[l(y,{label:1},{default:o(()=>[_("启用")]),_:1}),l(y,{label:2},{default:o(()=>[_("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[l(i,{label:"备注"},{default:o(()=>[l(p,{modelValue:e.ruleForm.remark,"onUpdate:modelValue":a[4]||(a[4]=r=>e.ruleForm.remark=r),placeholder:"请输入备注内容",clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1}),l(u,{xs:24,sm:24,md:24,lg:24,xl:24,class:"mb20"},{default:o(()=>[G((F(),W(i,{label:"菜单权限"},{default:o(()=>[l(M,{ref_key:"treeRef",ref:m,data:e.menuData,"node-key":"id","show-checkbox":"",props:{children:"children",label:"title",class:N},icon:"ele-Menu","highlight-current":"","default-expand-all":""},null,8,["data","props"])]),_:1})),[[K,e.loading]])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const te=X(Z,[["__scopeId","data-v-57b24b5a"]]);export{te as default};
