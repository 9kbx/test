import{f as V,M as K,O as B}from"./index.795da706.js";import{S as R}from"./sys-org-api.0ad7d209.js";import{K as I,r as f,a1 as M,k as E,w as G,ak as n,au as L,o as h,R as P,S as o,b as d,Y as a,u as p,W as c,T as U,a as W}from"./vue.e20a9695.js";import{_ as Y}from"./_plugin-vue_export-helper.c27b6911.js";import"./monacoEditor.9170b963.js";const j={class:"card-header"},q={class:"tree-h-flex"},z={class:"tree-h-left"},F={class:"tree-h-right"},H={style:{"margin-bottom":"45px"}},J=I({__name:"orgTree",emits:["node-click"],setup(Q,{expose:m,emit:u}){const i=f(""),s=f(),l=M({loading:!1,orgData:[],isShowCheckbox:!1,ownOrgData:[]});E(()=>{_()}),G(i,e=>{s.value.filter(e)});const _=async()=>{l.loading=!0;var e=await V(R).apiSysOrgListGet(0);l.orgData=e.data.result??[],l.loading=!1},g=e=>{l.isShowCheckbox=!0,s.value.setCheckedKeys([]),l.ownOrgData=e},k=()=>s.value.getCheckedKeys(),v=(e,t)=>e?t.name.includes(e):!0,w=async e=>{if(e=="expandAll")for(let t=0;t<s.value.store._getAllNodes().length;t++)s.value.store._getAllNodes()[t].expanded=!0;else if(e=="collapseAll")for(let t=0;t<s.value.store._getAllNodes().length;t++)s.value.store._getAllNodes()[t].expanded=!1;else e=="refresh"?_():e=="rootNode"&&u("node-click",{id:0,name:""})},x=e=>{u("node-click",{id:e.id,name:e.name})};return m({initTreeData:_,setCheckedKeys:g,getCheckedKeys:k}),(e,t)=>{const y=n("el-input"),b=n("el-icon"),C=n("el-button"),r=n("el-dropdown-item"),N=n("el-dropdown-menu"),A=n("el-dropdown"),D=n("el-tree"),O=n("el-card"),S=L("loading");return h(),P(O,{class:"box-card",shadow:"hover",style:{height:"100%"},"body-style":"height:100%; overflow:auto"},{header:o(()=>[d("div",j,[d("div",q,[d("div",z,[a(y,{"prefix-icon":p(K),modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=T=>i.value=T),placeholder:"机构名称"},null,8,["prefix-icon","modelValue"])]),d("div",F,[a(A,{onCommand:w},{dropdown:o(()=>[a(N,null,{default:o(()=>[a(r,{command:"expandAll"},{default:o(()=>[c("全部展开")]),_:1}),a(r,{command:"collapseAll"},{default:o(()=>[c("全部折叠")]),_:1}),a(r,{command:"rootNode"},{default:o(()=>[c("根节点")]),_:1}),a(r,{command:"refresh"},{default:o(()=>[c("刷新")]),_:1})]),_:1})]),default:o(()=>[a(C,{style:{"margin-left":"8px",width:"34px"}},{default:o(()=>[a(b,{class:"el-icon--center"},{default:o(()=>[a(p(B))]),_:1})]),_:1})]),_:1})])])])]),default:o(()=>[U((h(),W("div",H,[a(D,{ref_key:"treeRef",ref:s,class:"filter-tree",data:l.orgData,"node-key":"id",props:{children:"children",label:"name"},"filter-node-method":v,onNodeClick:x,"show-checkbox":l.isShowCheckbox,"default-checked-keys":l.ownOrgData,"highlight-current":"","check-strictly":""},null,8,["data","show-checkbox","default-checked-keys"])])),[[S,l.loading]])]),_:1})}}});const oe=Y(J,[["__scopeId","data-v-64cc4ab0"]]);export{oe as default};
