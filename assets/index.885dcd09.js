import{K as x,r as I,a1 as A,k as Q,a0 as $,ak as d,au as v,o as r,a as M,Y as e,S as t,ac as P,T as g,R as s,W as i,V as _}from"./vue.e20a9695.js";import{e as k,g as C,f as j,E as O}from"./index.122dcd40.js";import{_ as F,S as U}from"./editWeChatUser.vue_vue_type_script_setup_true_name_sysEditWeChatUser_lang.47b73c38.js";import"./monacoEditor.48edecf2.js";const Y={class:"weChatUser-container"},G=x({name:"weChatUser"}),ee=x({...G,setup(H){const w=I(),a=A({loading:!1,weChatUserData:[],queryParams:{nickName:void 0,mobile:void 0},tableParams:{page:1,pageSize:10,total:0},editWeChatUserTitle:""});Q(async()=>{u(),k.on("submitRefresh",()=>{u()})}),$(()=>{k.off("submitRefresh")});const u=async()=>{var f,c;a.loading=!0;let p=Object.assign(a.queryParams,a.tableParams);var l=await C(U).apiSysWechatUserPagePost(p);a.weChatUserData=((f=l.data.result)==null?void 0:f.items)??[],a.tableParams.total=(c=l.data.result)==null?void 0:c.total,a.loading=!1},z=()=>{a.queryParams.nickName=void 0,a.queryParams.mobile=void 0,u()},T=p=>{var l;a.editWeChatUserTitle="编辑微信账号",(l=w.value)==null||l.openDialog(p)},W=p=>{j.confirm(`确定删除微信账号：【${p.nickName}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await C(U).apiSysWechatUserDeletePost({id:p.id}),u(),O.success("删除成功")}).catch(()=>{})},S=p=>{a.tableParams.pageSize=p,u()},q=p=>{a.tableParams.page=p,u()};return(p,l)=>{const f=d("el-input"),c=d("el-form-item"),y=d("el-button"),N=d("el-button-group"),V=d("el-form"),b=d("el-card"),n=d("el-table-column"),m=d("el-tag"),D=d("el-avatar"),B=d("el-table"),E=d("el-pagination"),h=v("auth"),K=v("loading");return r(),M("div",Y,[e(b,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:t(()=>[e(V,{model:a.queryParams,ref:"queryForm",inline:!0},{default:t(()=>[e(c,{label:"微信昵称",prop:"nickName"},{default:t(()=>[e(f,{placeholder:"微信昵称",clearable:"",onKeyup:P(u,["enter"]),modelValue:a.queryParams.nickName,"onUpdate:modelValue":l[0]||(l[0]=o=>a.queryParams.nickName=o)},null,8,["onKeyup","modelValue"])]),_:1}),e(c,{label:"手机号码",prop:"mobile"},{default:t(()=>[e(f,{placeholder:"手机号码",clearable:"",onKeyup:P(u,["enter"]),modelValue:a.queryParams.mobile,"onUpdate:modelValue":l[1]||(l[1]=o=>a.queryParams.mobile=o)},null,8,["onKeyup","modelValue"])]),_:1}),e(c,null,{default:t(()=>[e(N,null,{default:t(()=>[g((r(),s(y,{type:"primary",icon:"ele-Search",onClick:u,plain:""},{default:t(()=>[i(" 查询 ")]),_:1})),[[h,"sysWechatUser:page"]]),e(y,{icon:"ele-Refresh",onClick:z},{default:t(()=>[i(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(b,{shadow:"hover",style:{"margin-top":"8px"}},{default:t(()=>[g((r(),s(B,{data:a.weChatUserData,style:{width:"100%"},border:""},{default:t(()=>[e(n,{type:"index",label:"序号",width:"55",align:"center"}),e(n,{prop:"openId",label:"OpenId","show-overflow-tooltip":""}),e(n,{prop:"unionId",label:"UnionId","show-overflow-tooltip":""}),e(n,{prop:"platformType",label:"平台类型",width:"110",align:"center","show-overflow-tooltip":""},{default:t(o=>[o.row.platformType===1?(r(),s(m,{key:0},{default:t(()=>[i(" 微信公众号 ")]),_:1})):_("",!0),o.row.platformType===2?(r(),s(m,{key:1},{default:t(()=>[i(" 微信小程序 ")]),_:1})):_("",!0),o.row.platformType===3?(r(),s(m,{key:2},{default:t(()=>[i(" 支付宝小程序 ")]),_:1})):_("",!0),o.row.platformType===4?(r(),s(m,{key:3},{default:t(()=>[i(" 微信APP快捷登陆 ")]),_:1})):_("",!0),o.row.platformType===5?(r(),s(m,{key:4},{default:t(()=>[i(" QQ在APP中快捷登陆 ")]),_:1})):_("",!0),o.row.platformType===6?(r(),s(m,{key:5},{default:t(()=>[i(" 头条系小程序 ")]),_:1})):_("",!0)]),_:1}),e(n,{prop:"nickName",label:"昵称","show-overflow-tooltip":""}),e(n,{prop:"avatar",label:"头像",width:"70",align:"center"},{default:t(o=>[e(D,{src:o.row.avatar,size:24,style:{"vertical-align":"middle"}},null,8,["src"])]),_:1}),e(n,{prop:"mobile",label:"手机号码","show-overflow-tooltip":""}),e(n,{prop:"sex",label:"性别",width:"60",align:"center","show-overflow-tooltip":""},{default:t(o=>[o.row.sex===0?(r(),s(m,{key:0},{default:t(()=>[i(" 男 ")]),_:1})):(r(),s(m,{key:1,type:"danger"},{default:t(()=>[i(" 女 ")]),_:1}))]),_:1}),e(n,{prop:"city",label:"城市","show-overflow-tooltip":""}),e(n,{prop:"province",label:"省","show-overflow-tooltip":""}),e(n,{prop:"country",label:"国家","show-overflow-tooltip":""}),e(n,{label:"操作",width:"140",fixed:"right",align:"center","show-overflow-tooltip":""},{default:t(o=>[g((r(),s(y,{icon:"ele-Edit",size:"small",text:"",type:"primary",onClick:R=>T(o.row)},{default:t(()=>[i(" 编辑 ")]),_:2},1032,["onClick"])),[[h,"sysWechatUser:update"]]),g((r(),s(y,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:R=>W(o.row)},{default:t(()=>[i(" 删除 ")]),_:2},1032,["onClick"])),[[h,"sysWechatUser:delete"]])]),_:1})]),_:1},8,["data"])),[[K,a.loading]]),e(E,{currentPage:a.tableParams.page,"onUpdate:currentPage":l[2]||(l[2]=o=>a.tableParams.page=o),"page-size":a.tableParams.pageSize,"onUpdate:pageSize":l[3]||(l[3]=o=>a.tableParams.pageSize=o),total:a.tableParams.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:S,onCurrentChange:q,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])]),_:1}),e(F,{ref_key:"editWeChatUserRef",ref:w,title:a.editWeChatUserTitle},null,8,["title"])])}}});export{ee as default};
