import{K as T,r as F,a1 as Q,k as G,a0 as O,ak as l,au as k,o as c,a as Y,Y as e,S as a,ac as H,T as f,R as u,W as d,u as C}from"./vue.e20a9695.js";import{e as x,g as w,E as z,f as J}from"./index.32ca2701.js";import{a as S}from"./authFunction.6d9e186f.js";import{_ as L,W as y}from"./editDevice.vue_vue_type_script_setup_true_name_wolEditDevice_lang.54918d42.js";import"./monacoEditor.48edecf2.js";const X={class:"sys-role-container"},Z=T({name:"wolDevice"}),ie=T({...Z,setup(ee){const v=F(),t=Q({loading:!1,deviceData:[],queryParams:{name:void 0},tableParams:{page:1,pageSize:10,total:0},editDeviceTitle:""});G(async()=>{r(),x.on("submitRefresh",()=>{r()})}),O(()=>{x.off("submitRefresh")});const r=async()=>{var _,p;t.loading=!0;let o=Object.assign(t.queryParams,t.tableParams);var n=await w(y).apiWolDevicePagePost(o);t.deviceData=((_=n.data.result)==null?void 0:_.items)??[],t.tableParams.total=(p=n.data.result)==null?void 0:p.total,t.loading=!1},B=()=>{t.queryParams.name=void 0,r()},q=()=>{var o;t.editDeviceTitle="添加唤醒设备",(o=v.value)==null||o.openDialog({})},W=async o=>{await w(y).apiWolDeviceWolDeviceIdGet(o.id),z.success("已发送唤醒命令")},A=async o=>{var n;t.editDeviceTitle="编辑角色",(n=v.value)==null||n.openDialog(o)},E=o=>{J.confirm(`确定删设备：【${o.name}】?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{await w(y).apiWolDeviceDeletePost({id:o.id}),r(),z.success("删除成功")}).catch(()=>{})},R=o=>{t.tableParams.pageSize=o,r()},M=o=>{t.tableParams.page=o,r()};return(o,n)=>{const _=l("el-input"),p=l("el-form-item"),m=l("el-button"),N=l("el-button-group"),U=l("el-form"),b=l("el-card"),s=l("el-table-column"),h=l("el-tag"),D=l("el-dropdown-item"),V=l("el-dropdown-menu"),$=l("el-dropdown"),K=l("el-table"),I=l("el-pagination"),g=k("auth"),j=k("loading");return c(),Y("div",X,[e(b,{shadow:"hover","body-style":{paddingBottom:"0"}},{default:a(()=>[e(U,{model:t.queryParams,ref:"queryForm",inline:!0},{default:a(()=>[e(p,{label:"Name",prop:"name"},{default:a(()=>[e(_,{placeholder:"Name",clearable:"",onKeyup:H(r,["enter"]),modelValue:t.queryParams.name,"onUpdate:modelValue":n[0]||(n[0]=i=>t.queryParams.name=i)},null,8,["onKeyup","modelValue"])]),_:1}),e(p,null,{default:a(()=>[e(N,null,{default:a(()=>[f((c(),u(m,{type:"primary",icon:"ele-Search",onClick:r},{default:a(()=>[d(" 查询 ")]),_:1})),[[g,"wolDevice:page"]]),e(m,{icon:"ele-Refresh",onClick:B},{default:a(()=>[d(" 重置 ")]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[f((c(),u(m,{type:"primary",icon:"ele-Plus",onClick:q},{default:a(()=>[d(" 新增 ")]),_:1})),[[g,"wolDevice:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),e(b,{shadow:"hover",style:{"margin-top":"8px"}},{default:a(()=>[f((c(),u(K,{data:t.deviceData,style:{width:"100%"},border:""},{default:a(()=>[e(s,{type:"index",label:"序号",width:"55",align:"center",fixed:""}),e(s,{prop:"name",label:"别名","show-overflow-tooltip":""}),e(s,{prop:"macAddress",label:"MAC地址","show-overflow-tooltip":""}),e(s,{prop:"ipAddress",label:"IP地址","show-overflow-tooltip":""}),e(s,{prop:"port",label:"Port","show-overflow-tooltip":""}),e(s,{label:"网络类型",width:"70",align:"center","show-overflow-tooltip":""},{default:a(i=>[i.row.internalNetwork===!0?(c(),u(h,{key:0,type:"success"},{default:a(()=>[d("内部网络")]),_:1})):(c(),u(h,{key:1,type:"danger"},{default:a(()=>[d("外部网络")]),_:1}))]),_:1}),e(s,{prop:"createTime",label:"修改时间",align:"center","show-overflow-tooltip":""}),e(s,{label:"操作",width:"110",fixed:"left",align:"center","show-overflow-tooltip":""},{default:a(i=>[f((c(),u(m,{icon:"ele-SwitchButton",size:"small",text:"",type:"primary",onClick:P=>W(i.row)},{default:a(()=>[d(" 唤醒 ")]),_:2},1032,["onClick"])),[[g,"wolDevice:wol"]]),e($,null,{dropdown:a(()=>[e(V,null,{default:a(()=>[e(D,{icon:"ele-Edit",onClick:P=>A(i.row),divided:"",disabled:!C(S)("wolDevice:update")},{default:a(()=>[d(" 编辑 ")]),_:2},1032,["onClick","disabled"]),e(D,{icon:"ele-Delete",onClick:P=>E(i.row),divided:"",disabled:!C(S)("wolDevice:delete")},{default:a(()=>[d(" 删除 ")]),_:2},1032,["onClick","disabled"])]),_:2},1024)]),default:a(()=>[e(m,{icon:"ele-MoreFilled",size:"small",text:"",type:"primary",style:{"padding-left":"12px"}})]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[j,t.loading]]),e(I,{currentPage:t.tableParams.page,"onUpdate:currentPage":n[1]||(n[1]=i=>t.tableParams.page=i),"page-size":t.tableParams.pageSize,"onUpdate:pageSize":n[2]||(n[2]=i=>t.tableParams.pageSize=i),total:t.tableParams.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:R,onCurrentChange:M,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])]),_:1}),e(L,{ref_key:"editDeviceRef",ref:v,title:t.editDeviceTitle},null,8,["title"])])}}});export{ie as default};
